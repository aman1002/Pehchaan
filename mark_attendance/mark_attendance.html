<!DOCTYPE html>
<html>
<head>
	<title>Pehchaan(Mark_attendance)</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" >
	<script src="https://sdk.amazonaws.com/js/aws-sdk-2.204.0.min.js"></script>
	<script src="https://unpkg.com/scrollreveal/dist/scrollreveal.min.js"></script>


</head>
<body>
	<h1 style="color: red; text-align: center;">Attendance marker</h1>
	<h3 style="color: black; text-align: center;">The face recognition based attendance application</h3>
	<br><br><br><br>


    <label>Choose Snapshot of classroom</label>
    <input type="file" id="file-chooser" />
    <button id="upload-button" >Upload class snapshot</button>
    <div id="results"></div>

<script type="text/javascript">
	var albumBucketName = 'mausamrest';
	var bucketRegion = 'us-east-1';
	var IdentityPoolId = 'us-east-1:e14eb975-bd76-4c1e-a585-7d91fb328e3b';

	AWS.config.update({
		region: bucketRegion,
		credentials: new AWS.CognitoIdentityCredentials({
		IdentityPoolId: IdentityPoolId
		})
	});

	var s3 = new AWS.S3({
		apiVersion: '2006-03-01',
		params: {
			Bucket: albumBucketName
		}
	});

	var dynamodb = new AWS.DynamoDB({apiVersion: '2012-08-10'});

	var fileChooser = document.getElementById("file-chooser");
    var button = document.getElementById("upload-button");
    var results = document.getElementById("results");
    
   


	button.addEventListener('click', function () {
			  	 
            var file = fileChooser.files[0];
            if (file) {
                results.innerHTML = '';
                
                
                var params = {
                    Key: 'dated/group1.jpeg',
                    ContentType: file.type,
                    Body: file,
                    ACL: 'public-read'
                };

                s3.putObject(params, function (err, data) {
                    if (err) {
                        results.innerHTML = 'ERROR: ' + err;
                    }else {
                        results.innerHTML = ' snapshot uploaded !!!';
                    }
                }).on('httpUploadProgress', function (progress) {console.log(progress);});


            } else {
            	 
                results.innerHTML = 'Nothing to upload.';
            }


           
            



     }, false);

</script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" ></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" ></script>
<script type="text/javascript">
	window.sr = ScrollReveal();
      sr.reveal('.foo', { duration: 2500 });
      sr.reveal('.bar', { duration: 4000 });
</script>	

</body>
</html>