<!DOCTYPE html>
<html>
<head>
	<title>Pehchaan(Mark_attendance)</title>
	<script src="https://sdk.amazonaws.com/js/aws-sdk-2.204.0.min.js"></script>


</head>
<body>
	<h1 style="color: red; text-align: center;">Attendance marker</h1>
	<h3 style="color: black; text-align: center;">The face recognition based attendance application</h3>
	<br><br><br><br>


    <label>Choose Snapshot of classroom</label>
    <input type="file" id="file-chooser" />
    <button id="upload-button" >Upload class snapshot</button>
    <div id="results"></div>

<script type="text/javascript">
	var albumBucketName = '';
	var bucketRegion = '';
	var IdentityPoolId = '';

	AWS.config.update({
		region: bucketRegion,
		credentials: new AWS.CognitoIdentityCredentials({
		IdentityPoolId: IdentityPoolId
		})
	});

	var s3 = new AWS.S3({
		apiVersion: '2006-03-01',
		params: {
			Bucket: albumBucketName
		}
	});

	var dynamodb = new AWS.DynamoDB({apiVersion: '2012-08-10'});

	var fileChooser = document.getElementById("file-chooser");
    var button = document.getElementById("upload-button");
    var results = document.getElementById("results");
    
   


	button.addEventListener('click', function () {
			  	 
            var file = fileChooser.files[0];
            if (file) {
                results.innerHTML = '';
                
                
                var params = {
                    Key: 'dated/group1.jpeg',
                    ContentType: file.type,
                    Body: file,
                    ACL: 'public-read'
                };

                s3.putObject(params, function (err, data) {
                    if (err) {
                        results.innerHTML = 'ERROR: ' + err;
                    }else {
                        results.innerHTML = ' snapshot uploaded !!!';
                    }
                }).on('httpUploadProgress', function (progress) {console.log(progress);});


            } else {
            	 
                results.innerHTML = 'Nothing to upload.';
            }


           
            



     }, false);

</script>

</body>
</html>